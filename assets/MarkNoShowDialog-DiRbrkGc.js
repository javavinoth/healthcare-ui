import{r as h,b as f,E as w,G as k,j as e,N as b,O as F,P as S,Q as q,R as D,L as v,I as M,ad as I,B as g,$ as P,D as U,a8 as Q}from"./index-BB-E_p6U.js";import{T as y}from"./textarea-DhTP2_Mu.js";import{C as A}from"./checkbox-D9n8-4Yc.js";import{C as K}from"./circle-check-D-TAXWVH.js";function $({open:j,onOpenChange:C,appointment:t}){const[s,m]=h.useState(""),[i,p]=h.useState(!1),[c,l]=h.useState(),{toast:d}=f(),u=w(),n=k({mutationFn:r=>P.checkInAppointment(t.id,r),onSuccess:()=>{d({title:"Patient Checked In",description:`${t.patientName} has been successfully checked in.`}),u.invalidateQueries({queryKey:["provider-appointments"]}),u.invalidateQueries({queryKey:["provider-calendar"]}),u.invalidateQueries({queryKey:["provider-dashboard"]}),x()},onError:r=>{d({variant:"destructive",title:"Check-in Failed",description:r.response?.data?.message||"Failed to check in patient"})}}),a=()=>{n.mutate({notes:s.trim()||void 0,isLateArrival:i,minutesLate:i?c:void 0})},x=()=>{m(""),p(!1),l(void 0),C(!1)};return e.jsx(b,{open:j,onOpenChange:x,children:e.jsxs(F,{className:"sm:max-w-[500px]",children:[e.jsxs(S,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),"Check In Patient"]}),e.jsxs(D,{children:["Check in ",t.patientName," for their ",t.time," ","appointment"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"lateArrival",checked:i,onCheckedChange:r=>p(r===!0)}),e.jsx("label",{htmlFor:"lateArrival",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Patient arrived late"})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"minutesLate",children:"Minutes Late"}),e.jsx(M,{id:"minutesLate",type:"number",min:"1",max:"120",value:c||"",onChange:r=>l(r.target.value?parseInt(r.target.value):void 0),placeholder:"Enter minutes late"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(y,{id:"notes",value:s,onChange:r=>m(r.target.value),placeholder:"Any notes about the check-in process...",rows:3,maxLength:1e3}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.length,"/1000 characters"]})]})]}),e.jsxs(I,{children:[e.jsx(g,{variant:"outline",onClick:x,disabled:n.isPending,children:"Cancel"}),e.jsx(g,{onClick:a,disabled:n.isPending,children:n.isPending?"Checking In...":"Check In Patient"})]})]})})}function B({open:j,onOpenChange:C,appointment:t}){const[s,m]=h.useState(""),[i,p]=h.useState(!1),[c,l]=h.useState(""),[d,u]=h.useState(),{toast:n}=f(),a=w(),x=k({mutationFn:o=>P.completeAppointment(t.id,o),onSuccess:()=>{n({title:"Appointment Completed",description:`Visit with ${t.patientName} has been marked as completed.`}),a.invalidateQueries({queryKey:["provider-appointments"]}),a.invalidateQueries({queryKey:["provider-calendar"]}),a.invalidateQueries({queryKey:["provider-dashboard"]}),a.invalidateQueries({queryKey:["provider-stats"]}),N()},onError:o=>{n({variant:"destructive",title:"Failed to Complete",description:o.response?.data?.message||"Failed to complete appointment"})}}),r=()=>{if(s.trim().length<10){n({variant:"destructive",title:"Notes Required",description:"Please provide visit notes (at least 10 characters)"});return}x.mutate({notes:s.trim(),followUpRequired:i,followUpInstructions:i&&c.trim()||void 0,followUpDays:i?d:void 0})},N=()=>{m(""),p(!1),l(""),u(void 0),C(!1)},L=s.trim().length>=10;return e.jsx(b,{open:j,onOpenChange:N,children:e.jsxs(F,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(S,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-primary"}),"Complete Appointment"]}),e.jsxs(D,{children:["Complete visit with ",t.patientName," - ",t.time]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"notes",className:"flex items-center gap-1",children:["Visit Notes",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(y,{id:"notes",value:s,onChange:o=>m(o.target.value),placeholder:"Document the visit details, assessment, and plan...",rows:6,maxLength:5e3,className:s.trim().length>0&&s.trim().length<10?"border-destructive":""}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:s.trim().length<10&&s.trim().length>0?`${10-s.trim().length} more characters needed`:"Minimum 10 characters required"}),e.jsxs("span",{children:[s.length,"/5000 characters"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"followUpRequired",checked:i,onCheckedChange:o=>p(o===!0)}),e.jsx("label",{htmlFor:"followUpRequired",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Follow-up appointment required"})]}),i&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"followUpInstructions",children:"Follow-up Instructions"}),e.jsx(y,{id:"followUpInstructions",value:c,onChange:o=>l(o.target.value),placeholder:"Specific instructions for follow-up...",rows:3,maxLength:1e3}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.length,"/1000 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"followUpDays",children:"Recommended Timeframe (Days)"}),e.jsx(M,{id:"followUpDays",type:"number",min:"1",max:"365",value:d||"",onChange:o=>u(o.target.value?parseInt(o.target.value):void 0),placeholder:"e.g., 7, 14, 30"})]})]})]}),e.jsxs(I,{children:[e.jsx(g,{variant:"outline",onClick:N,disabled:x.isPending,children:"Cancel"}),e.jsx(g,{onClick:r,disabled:!L||x.isPending,children:x.isPending?"Completing...":"Complete Appointment"})]})]})})}function V({open:j,onOpenChange:C,appointment:t}){const[s,m]=h.useState(""),[i,p]=h.useState(!1),{toast:c}=f(),l=w(),d=k({mutationFn:a=>P.markNoShow(t.id,a),onSuccess:()=>{c({title:"Marked as No-Show",description:`Appointment with ${t.patientName} has been marked as no-show.`}),l.invalidateQueries({queryKey:["provider-appointments"]}),l.invalidateQueries({queryKey:["provider-calendar"]}),l.invalidateQueries({queryKey:["provider-dashboard"]}),l.invalidateQueries({queryKey:["provider-stats"]}),n()},onError:a=>{c({variant:"destructive",title:"Failed to Mark No-Show",description:a.response?.data?.message||"Failed to mark appointment as no-show"})}}),u=()=>{d.mutate({notes:s.trim()||void 0,patientContacted:i})},n=()=>{m(""),p(!1),C(!1)};return e.jsx(b,{open:j,onOpenChange:n,children:e.jsxs(F,{className:"sm:max-w-[500px]",children:[e.jsxs(S,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-orange-600"}),"Mark as No-Show"]}),e.jsxs(D,{children:["Mark ",t.patientName,"'s ",t.time," appointment as no-show"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("div",{className:"rounded-lg bg-orange-50 border border-orange-200 p-3",children:e.jsx("p",{className:"text-sm text-orange-900",children:"This action will mark the appointment as no-show. The patient did not arrive for their scheduled appointment."})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"patientContacted",checked:i,onCheckedChange:a=>p(a===!0)}),e.jsx("label",{htmlFor:"patientContacted",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Patient was contacted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(y,{id:"notes",value:s,onChange:a=>m(a.target.value),placeholder:"Any additional notes about the no-show...",rows:3,maxLength:500}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.length,"/500 characters"]})]})]}),e.jsxs(I,{children:[e.jsx(g,{variant:"outline",onClick:n,disabled:d.isPending,children:"Cancel"}),e.jsx(g,{onClick:u,disabled:d.isPending,variant:"destructive",children:d.isPending?"Marking...":"Mark as No-Show"})]})]})})}export{$ as C,V as M,B as a};
