import{t as Z,r as o,ah as _,ai as Ke,j as e,a3 as ee,a4 as ae,aj as te,ak as Ge,al as Qe,a7 as v,b as M,E as q,y as z,z as K,G as F,L as A,i as R,I as O,B as N,v as I,$ as w,am as Xe,x as Je,w as D,an as se,ao as Ze,ap as ea,aq as aa,ar as ta,as as sa,at as ia,au as ra,av as na,aw as ie,ax as la,ay as re,N as oa,af as ca,O as da,P as ma,Q as ua,R as pa,l as ne,n as le,o as oe,p as ce,q as de,d as P,X as me,s as Q,ag as xa,a9 as ha,aa as fa,ab as $,Y as ga,ac as V,C as W,c as Y,e as B,f as U,g as H}from"./index-BCzS7ZUT.js";import{u as G}from"./useQuery-BEZ1twdU.js";import{L as S}from"./loader-circle-Bn1M6iDn.js";import{T as ya}from"./textarea-ByNf1Xf7.js";import{P as va}from"./plus-q8UrWG0n.js";import{f as T}from"./format-BLBLR528.js";import{C as ba}from"./circle-check-B5R6cpM8.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],X=Z("briefcase",ja);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Da=Z("circle-x",Na);var L="Switch",[wa]=ee(L),[Sa,Aa]=wa(L),ue=o.forwardRef((a,s)=>{const{__scopeSwitch:t,name:i,checked:n,defaultChecked:r,required:p,disabled:m,value:f="on",onCheckedChange:l,form:y,...d}=a,[j,x]=o.useState(null),c=_(s,k=>x(k)),g=o.useRef(!1),h=j?y||!!j.closest("form"):!0,[u,He]=Ke({prop:n,defaultProp:r??!1,onChange:l,caller:L});return e.jsxs(Sa,{scope:t,checked:u,disabled:m,children:[e.jsx(ae.button,{type:"button",role:"switch","aria-checked":u,"aria-required":p,"data-state":fe(u),"data-disabled":m?"":void 0,disabled:m,value:f,...d,ref:c,onClick:te(a.onClick,k=>{He(ze=>!ze),h&&(g.current=k.isPropagationStopped(),g.current||k.stopPropagation())})}),h&&e.jsx(he,{control:j,bubbles:!g.current,name:i,value:f,checked:u,required:p,disabled:m,form:y,style:{transform:"translateX(-100%)"}})]})});ue.displayName=L;var pe="SwitchThumb",xe=o.forwardRef((a,s)=>{const{__scopeSwitch:t,...i}=a,n=Aa(pe,t);return e.jsx(ae.span,{"data-state":fe(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s})});xe.displayName=pe;var Ca="SwitchBubbleInput",he=o.forwardRef(({__scopeSwitch:a,control:s,checked:t,bubbles:i=!0,...n},r)=>{const p=o.useRef(null),m=_(p,r),f=Ge(t),l=Qe(s);return o.useEffect(()=>{const y=p.current;if(!y)return;const d=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(d,"checked").set;if(f!==t&&x){const c=new Event("click",{bubbles:i});x.call(y,t),y.dispatchEvent(c)}},[f,t,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:m,style:{...n.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});he.displayName=Ca;function fe(a){return a?"checked":"unchecked"}var ge=ue,Ta=xe;const ye=o.forwardRef(({className:a,...s},t)=>e.jsx(ge,{className:v("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:e.jsx(Ta,{className:v("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ye.displayName=ge.displayName;const E=[{key:"MONDAY",label:"Monday"},{key:"TUESDAY",label:"Tuesday"},{key:"WEDNESDAY",label:"Wednesday"},{key:"THURSDAY",label:"Thursday"},{key:"FRIDAY",label:"Friday"},{key:"SATURDAY",label:"Saturday"},{key:"SUNDAY",label:"Sunday"}],ka=I({dayOfWeek:D(),startTime:D(),endTime:D(),isActive:Je()}),Ea=I({availability:Xe(ka)});function Ra(){const{toast:a}=M(),s=q(),[t,i]=o.useState(!1),{handleSubmit:n,setValue:r,watch:p,reset:m}=z({resolver:K(Ea),defaultValues:{availability:E.map(c=>({dayOfWeek:c.key,startTime:"09:00",endTime:"17:00",isActive:!0}))}}),f=p("availability"),{data:l,isLoading:y}=G({queryKey:["provider","settings"],queryFn:w.getProviderSettings});o.useEffect(()=>{if(l?.availability&&l.availability.length>0){const c=new Map(l.availability.map(h=>[h.dayOfWeek,h])),g=E.map(h=>{const u=c.get(h.key);return{dayOfWeek:h.key,startTime:u?.startTime||"09:00",endTime:u?.endTime||"17:00",isActive:u?.isActive??!1}});m({availability:g}),i(!1)}},[l,m]);const d=F({mutationFn:c=>w.updateAvailability(c),onSuccess:()=>{s.invalidateQueries({queryKey:["provider","settings"]}),i(!1),a({title:"Schedule Updated",description:"Your weekly availability has been saved successfully."})},onError:c=>{a({title:"Update Failed",description:c.response?.data?.message||"Failed to update schedule. Please try again.",variant:"destructive"})}}),j=c=>{d.mutate(c)},x=(c,g,h)=>{const u=[...f];u[c]={...u[c],[g]:h},r("availability",u),i(!0)};return y?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(S,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("form",{onSubmit:n(j),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:f.map((c,g)=>{const h=E[g];return e.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center gap-4 p-4 border rounded-lg transition-colors ${c.isActive?"bg-white border-gray-200":"bg-gray-50 border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start sm:w-40",children:[e.jsx(A,{htmlFor:`${c.dayOfWeek}-active`,className:"text-base font-medium",children:h.label}),e.jsx(ye,{id:`${c.dayOfWeek}-active`,checked:c.isActive,onCheckedChange:u=>x(g,"isActive",u)})]}),c.isActive?e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(R,{className:"h-4 w-4 text-gray-400"}),e.jsx(O,{type:"time",value:c.startTime,onChange:u=>x(g,"startTime",u.target.value),className:"w-full sm:w-32","aria-label":`${h.label} start time`})]}),e.jsx("span",{className:"text-gray-500 hidden sm:inline",children:"to"}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(R,{className:"h-4 w-4 text-gray-400"}),e.jsx(O,{type:"time",value:c.endTime,onChange:u=>x(g,"endTime",u.target.value),className:"w-full sm:w-32","aria-label":`${h.label} end time`})]})]}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Not available"})]},c.dayOfWeek)})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Note:"})," Patients can only book appointments during your active hours. Make sure to disable days when you're not available."]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(N,{type:"submit",disabled:!t||d.isPending,children:[d.isPending&&e.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Schedule"]}),t&&e.jsx(N,{type:"button",variant:"outline",onClick:()=>{if(l?.availability){const c=new Map(l.availability.map(h=>[h.dayOfWeek,h])),g=E.map(h=>{const u=c.get(h.key);return{dayOfWeek:h.key,startTime:u?.startTime||"09:00",endTime:u?.endTime||"17:00",isActive:u?.isActive??!1}});m({availability:g}),i(!1)}},children:"Reset"})]})]})}var ve="AlertDialog",[Oa]=ee(ve,[se]),b=se(),be=a=>{const{__scopeAlertDialog:s,...t}=a,i=b(s);return e.jsx(Ze,{...i,...t,modal:!0})};be.displayName=ve;var Pa="AlertDialogTrigger",je=o.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,n=b(t);return e.jsx(ea,{...n,...i,ref:s})});je.displayName=Pa;var _a="AlertDialogPortal",Ne=a=>{const{__scopeAlertDialog:s,...t}=a,i=b(s);return e.jsx(aa,{...i,...t})};Ne.displayName=_a;var Ma="AlertDialogOverlay",De=o.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,n=b(t);return e.jsx(la,{...n,...i,ref:s})});De.displayName=Ma;var C="AlertDialogContent",[qa,Fa]=Oa(C),Ia=ia("AlertDialogContent"),we=o.forwardRef((a,s)=>{const{__scopeAlertDialog:t,children:i,...n}=a,r=b(t),p=o.useRef(null),m=_(s,p),f=o.useRef(null);return e.jsx(ta,{contentName:C,titleName:Se,docsSlug:"alert-dialog",children:e.jsx(qa,{scope:t,cancelRef:f,children:e.jsxs(sa,{role:"alertdialog",...r,...n,ref:m,onOpenAutoFocus:te(n.onOpenAutoFocus,l=>{l.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:l=>l.preventDefault(),onInteractOutside:l=>l.preventDefault(),children:[e.jsx(Ia,{children:i}),e.jsx($a,{contentRef:p})]})})})});we.displayName=C;var Se="AlertDialogTitle",Ae=o.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,n=b(t);return e.jsx(ra,{...n,...i,ref:s})});Ae.displayName=Se;var Ce="AlertDialogDescription",Te=o.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,n=b(t);return e.jsx(na,{...n,...i,ref:s})});Te.displayName=Ce;var La="AlertDialogAction",ke=o.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,n=b(t);return e.jsx(ie,{...n,...i,ref:s})});ke.displayName=La;var Ee="AlertDialogCancel",Re=o.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,{cancelRef:n}=Fa(Ee,t),r=b(t),p=_(s,n);return e.jsx(ie,{...r,...i,ref:p})});Re.displayName=Ee;var $a=({contentRef:a})=>{const s=`\`${C}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${C}\` by passing a \`${Ce}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${C}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,a]),null},Va=be,Wa=je,Ya=Ne,Oe=De,Pe=we,_e=ke,Me=Re,qe=Ae,Fe=Te;const Ba=Va,Ua=Wa,Ha=Ya,Ie=o.forwardRef(({className:a,...s},t)=>e.jsx(Oe,{className:v("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t}));Ie.displayName=Oe.displayName;const Le=o.forwardRef(({className:a,...s},t)=>e.jsxs(Ha,{children:[e.jsx(Ie,{}),e.jsx(Pe,{ref:t,className:v("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]}));Le.displayName=Pe.displayName;const $e=({className:a,...s})=>e.jsx("div",{className:v("flex flex-col space-y-2 text-center sm:text-left",a),...s});$e.displayName="AlertDialogHeader";const Ve=({className:a,...s})=>e.jsx("div",{className:v("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});Ve.displayName="AlertDialogFooter";const We=o.forwardRef(({className:a,...s},t)=>e.jsx(qe,{ref:t,className:v("text-lg font-semibold",a),...s}));We.displayName=qe.displayName;const Ye=o.forwardRef(({className:a,...s},t)=>e.jsx(Fe,{ref:t,className:v("text-sm text-muted-foreground",a),...s}));Ye.displayName=Fe.displayName;const Be=o.forwardRef(({className:a,...s},t)=>e.jsx(_e,{ref:t,className:v(re(),a),...s}));Be.displayName=_e.displayName;const Ue=o.forwardRef(({className:a,...s},t)=>e.jsx(Me,{ref:t,className:v(re({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));Ue.displayName=Me.displayName;const za=I({startDate:D().min(1,"Start date is required"),endDate:D().min(1,"End date is required"),reason:D().min(1,"Reason is required"),notes:D().max(1e3,"Notes cannot exceed 1000 characters").optional()}).refine(a=>{const s=new Date(a.startDate);return new Date(a.endDate)>=s},{message:"End date must be on or after start date",path:["endDate"]}),Ka=[{value:"VACATION",label:"Vacation"},{value:"SICK_LEAVE",label:"Sick Leave"},{value:"PERSONAL",label:"Personal"},{value:"CONFERENCE",label:"Conference / Training"},{value:"OTHER",label:"Other"}];function J(){const{toast:a}=M(),s=q(),[t,i]=o.useState(!1),{register:n,handleSubmit:r,setValue:p,watch:m,reset:f,formState:{errors:l}}=z({resolver:K(za),defaultValues:{startDate:T(new Date,"yyyy-MM-dd"),endDate:T(new Date,"yyyy-MM-dd"),reason:"",notes:""}}),y=m("reason"),d=F({mutationFn:x=>w.requestTimeOff(x),onSuccess:()=>{s.invalidateQueries({queryKey:["provider","timeoff"]}),a({title:"Time-Off Request Submitted",description:"Your time-off request has been submitted for approval."}),i(!1),f()},onError:x=>{a({title:"Request Failed",description:x.response?.data?.message||"Failed to submit time-off request. Please try again.",variant:"destructive"})}}),j=x=>{d.mutate(x)};return e.jsxs(oa,{open:t,onOpenChange:i,children:[e.jsx(ca,{asChild:!0,children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(va,{className:"h-4 w-4"}),"Request Time Off"]})}),e.jsxs(da,{className:"sm:max-w-[500px]",children:[e.jsxs(ma,{children:[e.jsx(ua,{children:"Request Time Off"}),e.jsx(pa,{children:"Submit a time-off request for vacation, sick leave, or other reasons. Your request will require admin approval."})]}),e.jsxs("form",{onSubmit:r(j),className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(A,{htmlFor:"startDate",children:["Start Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(O,{id:"startDate",type:"date",...n("startDate"),className:l.startDate?"border-destructive":""}),l.startDate&&e.jsx("p",{className:"text-sm text-destructive",children:l.startDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(A,{htmlFor:"endDate",children:["End Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(O,{id:"endDate",type:"date",...n("endDate"),className:l.endDate?"border-destructive":""}),l.endDate&&e.jsx("p",{className:"text-sm text-destructive",children:l.endDate.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(A,{htmlFor:"reason",children:["Reason ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(ne,{value:y,onValueChange:x=>p("reason",x),children:[e.jsx(le,{id:"reason",className:l.reason?"border-destructive":"",children:e.jsx(oe,{placeholder:"Select a reason"})}),e.jsx(ce,{children:Ka.map(x=>e.jsx(de,{value:x.value,children:x.label},x.value))})]}),l.reason&&e.jsx("p",{className:"text-sm text-destructive",children:l.reason.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(ya,{id:"notes",placeholder:"Add any additional details about your time-off request...",...n("notes"),rows:3,className:l.notes?"border-destructive":""}),l.notes&&e.jsx("p",{className:"text-sm text-destructive",children:l.notes.message})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>{i(!1),f()},children:"Cancel"}),e.jsxs(N,{type:"submit",disabled:d.isPending,children:[d.isPending&&e.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Request"]})]})]})]})]})}const Ga={PENDING:{label:"Pending",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:R},APPROVED:{label:"Approved",color:"bg-green-100 text-green-800 border-green-200",icon:ba},DENIED:{label:"Denied",color:"bg-red-100 text-red-800 border-red-200",icon:Da},CANCELLED:{label:"Cancelled",color:"bg-gray-100 text-gray-800 border-gray-200",icon:me}},Qa={VACATION:"Vacation",SICK_LEAVE:"Sick Leave",PERSONAL:"Personal",CONFERENCE:"Conference / Training",OTHER:"Other"};function Xa(){const{toast:a}=M(),s=q(),{data:t,isLoading:i}=G({queryKey:["provider","timeoff"],queryFn:w.getTimeOffRequests}),n=F({mutationFn:r=>w.cancelTimeOffRequest(r),onSuccess:()=>{s.invalidateQueries({queryKey:["provider","timeoff"]}),a({title:"Request Cancelled",description:"Your time-off request has been cancelled."})},onError:r=>{a({title:"Cancellation Failed",description:r.response?.data?.message||"Failed to cancel request. Please try again.",variant:"destructive"})}});return i?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(S,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[t?.length||0," time-off ",t?.length===1?"request":"requests"]}),e.jsx(J,{})]}),!t||t.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[e.jsx(P,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Time-Off Requests"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't requested any time off yet."}),e.jsx(J,{})]}):e.jsx("div",{className:"space-y-4",children:t.map(r=>{const p=Ga[r.status],m=p.icon,f=r.status==="PENDING";return e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow bg-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(P,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-semibold text-gray-900",children:[T(new Date(r.startDate),"MMM dd, yyyy")," -"," ",T(new Date(r.endDate),"MMM dd, yyyy")]}),e.jsxs(Q,{variant:"outline",className:"text-xs",children:[r.durationDays," ",r.durationDays===1?"day":"days"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:Qa[r.reason]||r.reason}),r.notes&&e.jsx("p",{className:"text-sm text-gray-500 mt-2 italic",children:r.notes})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pl-8",children:[e.jsxs(Q,{className:p.color+" flex items-center gap-1 px-2 py-1",children:[e.jsx(m,{className:"h-3 w-3"}),p.label]}),r.approvedByName&&e.jsxs("span",{className:"text-xs text-gray-500",children:["by ",r.approvedByName]})]}),e.jsxs("p",{className:"text-xs text-gray-400 pl-8",children:["Submitted ",T(new Date(r.createdAt),"MMM dd, yyyy")]})]}),f&&e.jsxs(Ba,{children:[e.jsx(Ua,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive hover:text-white",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),"Cancel"]})}),e.jsxs(Le,{children:[e.jsxs($e,{children:[e.jsx(We,{children:"Cancel Time-Off Request?"}),e.jsx(Ye,{children:"Are you sure you want to cancel this time-off request? This action cannot be undone."})]}),e.jsxs(Ve,{children:[e.jsx(Ue,{children:"No, keep it"}),e.jsxs(Be,{onClick:()=>n.mutate(r.id),className:"bg-destructive text-white hover:bg-destructive/90",children:[n.isPending&&e.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, cancel request"]})]})]})]})]})},r.id)})})]})}const Ja=I({slotDuration:xa().min(5).max(240)}),Za=[{value:15,label:"15 minutes"},{value:20,label:"20 minutes"},{value:30,label:"30 minutes"},{value:45,label:"45 minutes"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}];function et(){const{toast:a}=M(),s=q(),{handleSubmit:t,setValue:i,watch:n,formState:{isDirty:r}}=z({resolver:K(Ja),defaultValues:{slotDuration:30}}),p=n("slotDuration"),{data:m,isLoading:f}=G({queryKey:["provider","settings"],queryFn:w.getProviderSettings});o.useEffect(()=>{m&&i("slotDuration",m.slotDuration)},[m,i]);const l=F({mutationFn:d=>w.updateProviderSettings(d),onSuccess:()=>{s.invalidateQueries({queryKey:["provider","settings"]}),a({title:"Settings Updated",description:"Your appointment settings have been saved successfully."})},onError:d=>{a({title:"Update Failed",description:d.response?.data?.message||"Failed to update settings. Please try again.",variant:"destructive"})}}),y=d=>{l.mutate(d)};return f?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(S,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("form",{onSubmit:t(y),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"slotDuration",children:"Appointment Slot Duration"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 mb-3",children:"Choose how long each appointment slot should be. This will be used when patients book appointments."}),e.jsxs(ne,{value:p.toString(),onValueChange:d=>i("slotDuration",parseInt(d),{shouldDirty:!0}),children:[e.jsx(le,{id:"slotDuration",className:"w-full sm:w-[300px]",children:e.jsx(oe,{placeholder:"Select duration"})}),e.jsx(ce,{children:Za.map(d=>e.jsx(de,{value:d.value.toString(),children:d.label},d.value))})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Note:"})," Changing your slot duration will affect future appointment bookings. Existing appointments will not be affected."]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(N,{type:"submit",disabled:!r||l.isPending,children:[l.isPending&&e.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Settings"]}),r&&e.jsx(N,{type:"button",variant:"outline",onClick:()=>{m&&i("slotDuration",m.slotDuration)},children:"Reset"})]})]})}function ot(){const[a,s]=o.useState("availability");return e.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-7xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Schedule Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your weekly availability, time-off requests, and appointment settings"})]}),e.jsxs(ha,{value:a,onValueChange:s,className:"w-full",children:[e.jsxs(fa,{className:"grid w-full grid-cols-3 lg:w-auto lg:inline-grid",children:[e.jsxs($,{value:"availability",className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Weekly Availability"}),e.jsx("span",{className:"sm:hidden",children:"Availability"})]}),e.jsxs($,{value:"timeoff",className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Time Off"}),e.jsx("span",{className:"sm:hidden",children:"Time Off"})]}),e.jsxs($,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"}),e.jsx("span",{className:"sm:hidden",children:"Settings"})]})]}),e.jsx(V,{value:"availability",className:"mt-6",children:e.jsxs(W,{children:[e.jsxs(Y,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-primary"}),"Weekly Availability Schedule"]}),e.jsx(U,{children:"Set your working hours for each day of the week. Patients can only book appointments during your available hours."})]}),e.jsx(H,{children:e.jsx(Ra,{})})]})}),e.jsx(V,{value:"timeoff",className:"mt-6",children:e.jsxs(W,{children:[e.jsxs(Y,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-primary"}),"Time Off Requests"]}),e.jsx(U,{children:"Request time off for vacations, conferences, or personal days. Pending requests require admin approval."})]}),e.jsx(H,{children:e.jsx(Xa,{})})]})}),e.jsx(V,{value:"settings",className:"mt-6",children:e.jsxs(W,{children:[e.jsxs(Y,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-primary"}),"Appointment Settings"]}),e.jsx(U,{children:"Configure your appointment slot duration. This determines how long each appointment booking will be."})]}),e.jsx(H,{children:e.jsx(et,{})})]})})]})]})}export{ot as default};
