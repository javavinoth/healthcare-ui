import{a as y,b,r as w,j as e,A,B as p,C as x,f as h,L as C,h as S}from"./index-DuMhMhWi.js";import{u as k}from"./useQuery-JRvwmfTD.js";import{S as V,a as F,b as B,c as D,d as a}from"./select-DTw568Z9.js";import{S as r}from"./skeleton-3W01mEq-.js";import{A as u}from"./AppointmentCard-Dwtg1Cup.js";import{E}from"./EmptyState-BCYEe_TQ.js";import{P as L}from"./plus-BFoHt4LR.js";import{F as T}from"./funnel-C6i5hpZt.js";import{C as J}from"./calendar-B51_PaVU.js";import"./index-Bv4a_plK.js";import"./format-BLBLR528.js";import"./video-DrI2Rt8i.js";import"./map-pin-pVXXKXIt.js";function z(){const l=y(),{toast:j}=b(),[t,c]=w.useState("all"),{data:g,isLoading:f,error:v,refetch:N}=k({queryKey:["appointments",t],queryFn:async()=>await S.getAll({status:t==="all"?void 0:t})}),n=g||[],d=s=>{l(`/patient/appointments/${s}`)},m=s=>{window.open(s,"_blank","noopener,noreferrer"),j({title:"Opening video call",description:"Your virtual appointment is opening in a new window.",variant:"success"})},i=n.filter(s=>s.status==="scheduled"||s.status==="confirmed"),o=n.filter(s=>s.status==="completed"||s.status==="cancelled"||s.status==="no_show");return e.jsxs("div",{className:"h-screen flex flex-col bg-neutral-light",children:[e.jsx(A,{title:"My Appointments"}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsx("div",{className:"bg-white border-b border-neutral-blue-gray/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-h1 text-neutral-blue-gray",children:"My Appointments"}),e.jsx("p",{className:"text-body text-neutral-blue-gray/70 mt-1",children:"View and manage your appointments"})]}),e.jsxs(p,{onClick:()=>l("/patient/appointments/book"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Book Appointment"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(x,{className:"mb-6",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{className:"h-5 w-5 text-neutral-blue-gray/70"}),e.jsx("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-3 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"status-filter",children:"Status"}),e.jsxs(V,{value:t,onValueChange:c,children:[e.jsx(F,{id:"status-filter",children:e.jsx(B,{placeholder:"All statuses"})}),e.jsxs(D,{children:[e.jsx(a,{value:"all",children:"All Appointments"}),e.jsx(a,{value:"scheduled",children:"Scheduled"}),e.jsx(a,{value:"confirmed",children:"Confirmed"}),e.jsx(a,{value:"completed",children:"Completed"}),e.jsx(a,{value:"cancelled",children:"Cancelled"})]})]})]})})]})})}),f?e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"h-48"}),e.jsx(r,{className:"h-48"}),e.jsx(r,{className:"h-48"})]}):v?e.jsx(x,{children:e.jsx(h,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-error mb-4",children:"Failed to load appointments."}),e.jsx(p,{onClick:()=>N(),variant:"outline",children:"Try Again"})]})})}):n.length===0?e.jsx(E,{icon:J,title:t==="all"?"No appointments found":`No ${t} appointments`,description:t==="all"?"You don't have any appointments yet. Book one to get started!":`You don't have any ${t} appointments. Try changing the filter.`,actionLabel:t==="all"?"Book Appointment":"Show All",onAction:()=>t==="all"?l("/patient/appointments/book"):c("all")}):e.jsxs("div",{className:"space-y-8",children:[(t==="all"||t==="scheduled"||t==="confirmed")&&i.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-h3 text-neutral-blue-gray mb-4",children:["Upcoming (",i.length,")"]}),e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsx(u,{appointment:s,onViewDetails:d,onJoinVideo:m},s.id))})]}),(t==="all"||t==="completed"||t==="cancelled")&&o.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-h3 text-neutral-blue-gray mb-4",children:["Past (",o.length,")"]}),e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsx(u,{appointment:s,onViewDetails:d,onJoinVideo:m},s.id))})]})]})]})]})]})}export{z as default};
