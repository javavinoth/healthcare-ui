import{a as R,b as S,r as A,j as e,A as C,C as p,g as j,L as F,l as L,n as D,o as T,p as V,q as l,B as _,F as E,m as g}from"./index-BB-E_p6U.js";import{u as M}from"./useQuery-Cszt6FRj.js";import{S as d}from"./skeleton-DbyQbH6c.js";import{M as v}from"./MedicalRecordCard-DbkfAFlp.js";import{E as k}from"./EmptyState-GGoYEz4p.js";import{F as P}from"./funnel-DJrPgsq8.js";import"./download-tv_Ng1uM.js";import"./format-BLBLR528.js";function H(){const y=R(),{toast:o}=S(),[a,n]=A.useState("all"),{data:N,isLoading:w,error:b,refetch:f}=M({queryKey:["medical-records",a],queryFn:async()=>await g.getAll({type:a==="all"?void 0:a})}),i=N||[],m=s=>{y(`/patient/medical-records/${s}`)},x=async s=>{try{const h=await g.download(s),u=window.URL.createObjectURL(h),r=document.createElement("a");r.href=u,r.download=`medical-record-${s}.pdf`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(u),document.body.removeChild(r),o({title:"Download started",description:"Your medical record is being downloaded.",variant:"success"})}catch{o({title:"Download failed",description:"Failed to download medical record. Please try again.",variant:"destructive"})}},t=i.filter(s=>s.isNew),c=i.filter(s=>!s.isNew);return e.jsxs("div",{className:"h-screen flex flex-col bg-neutral-light",children:[e.jsx(C,{title:"Medical Records"}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsx("div",{className:"bg-white border-b border-neutral-blue-gray/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-h1 text-neutral-blue-gray",children:"Medical Records"}),e.jsx("p",{className:"text-body text-neutral-blue-gray/70 mt-1",children:"View your lab results, imaging reports, and visit notes"})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(p,{className:"mb-6",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{className:"h-5 w-5 text-neutral-blue-gray/70"}),e.jsx("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-3 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"type-filter",children:"Record Type"}),e.jsxs(L,{value:a,onValueChange:n,children:[e.jsx(D,{id:"type-filter",children:e.jsx(T,{placeholder:"All types"})}),e.jsxs(V,{children:[e.jsx(l,{value:"all",children:"All Records"}),e.jsx(l,{value:"lab_result",children:"Lab Results"}),e.jsx(l,{value:"imaging",children:"Imaging"}),e.jsx(l,{value:"visit_note",children:"Visit Notes"}),e.jsx(l,{value:"prescription",children:"Prescriptions"}),e.jsx(l,{value:"immunization",children:"Immunizations"}),e.jsx(l,{value:"procedure_note",children:"Procedure Notes"}),e.jsx(l,{value:"discharge_summary",children:"Discharge Summaries"})]})]})]})})]})})}),w?e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{className:"h-48"}),e.jsx(d,{className:"h-48"}),e.jsx(d,{className:"h-48"})]}):b?e.jsx(p,{children:e.jsx(j,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-error mb-4",children:"Failed to load medical records."}),e.jsx(_,{onClick:()=>f(),variant:"outline",children:"Try Again"})]})})}):i.length===0?e.jsx(k,{icon:E,title:a==="all"?"No medical records found":`No ${a.replace("_"," ")} records`,description:a==="all"?"You don't have any medical records yet.":`You don't have any ${a.replace("_"," ")} records. Try changing the filter.`,actionLabel:a==="all"?void 0:"Show All",onAction:()=>a==="all"?void 0:n("all")}):e.jsxs("div",{className:"space-y-8",children:[t.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-h3 text-neutral-blue-gray mb-4",children:["New Records (",t.length,")"]}),e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsx(v,{record:s,onView:m,onDownload:x},s.id))})]}),c.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-h3 text-neutral-blue-gray mb-4",children:[t.length>0?"Previous Records":"All Records"," (",c.length,")"]}),e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsx(v,{record:s,onView:m,onDownload:x},s.id))})]})]})]})]})]})}export{H as default};
