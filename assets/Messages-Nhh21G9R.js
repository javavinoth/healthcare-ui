import{r as n,j as e,A as d,B as p,J as x}from"./index-dO-cU4Aw.js";import{u}from"./useQuery-DgJGF0O6.js";import{C as g,M as f,S as j,N as h}from"./NewMessageDialog-DMs95yWW.js";import{E as b}from"./EmptyState-DOoSANfD.js";import{P as v}from"./plus-D09jcQVb.js";import{M as N}from"./message-square-CbVmwuRp.js";import"./skeleton-DBvJt5kg.js";import"./scroll-area-BwfXiA6z.js";import"./format-BLBLR528.js";import"./subDays-MrZTzTeD.js";import"./select-Cq8RyKVM.js";import"./index-B1GzuOWH.js";import"./search-toAsDmkO.js";import"./endOfMonth-BVjs0DFG.js";import"./file-text-GWvBVpT9.js";import"./download-C3WKB7Oi.js";import"./textarea-iG9OmdwJ.js";import"./paperclip-9folvRHI.js";function z(){const[t,l]=n.useState(null),[o,r]=n.useState(!1),{data:c,isLoading:m}=u({queryKey:["conversations"],queryFn:()=>x.getConversations(),refetchInterval:3e4}),i=c?.data||[],s=i.find(a=>a.id===t);return e.jsxs("div",{className:"h-screen flex flex-col bg-white",children:[e.jsx(d,{title:"Messages"}),e.jsx("div",{className:"border-b border-neutral-blue-gray/10 bg-white px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-neutral-blue-gray/70",children:"Billing inquiries and payment communication"}),e.jsxs(p,{onClick:()=>r(!0),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"New Message"]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("aside",{className:"w-full md:w-1/3 lg:w-1/4 border-r border-neutral-blue-gray/10 flex flex-col",children:e.jsx(g,{conversations:i,selectedId:t,onSelect:l,isLoading:m})}),e.jsx("main",{className:"flex-1 flex flex-col bg-neutral-light",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-neutral-blue-gray/10 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold ${s?.participants[0]?.role==="patient"?"bg-info":s?.participants[0]?.role==="billing_staff"?"bg-warning":s?.participants[0]?.role==="admin"?"bg-error":"bg-secondary"}`,children:s?.participants[0]?.name?.split(" ").map(a=>a[0]).join("").toUpperCase()||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-h3 text-neutral-blue-gray truncate",children:s?.participants[0]?.name||"Unknown"}),e.jsx("p",{className:"text-caption text-neutral-blue-gray/60 capitalize",children:s?.participants[0]?.role?.replace("_"," ")||"Unknown role"})]})]}),s?.subject&&e.jsxs("p",{className:"text-small text-neutral-blue-gray/80 mt-2 truncate",children:["Subject: ",s.subject]})]}),e.jsx(f,{conversationId:t}),e.jsx(j,{conversationId:t})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(b,{icon:N,title:"Select a conversation",description:"Choose a conversation to communicate about billing and payments."})})})]}),e.jsx(h,{open:o,onOpenChange:r})]})}export{z as default};
