import{y as b,a as E,r as k,j as e,A as x,C as r,f as o,Y as N,B as a,k as M,c as p,d as h,g as S,U as I,M as A}from"./index-dO-cU4Aw.js";import{u as T}from"./useQuery-DgJGF0O6.js";import{S as P}from"./skeleton-DBvJt5kg.js";import{S as i}from"./separator-Bw31dVJ0.js";import{C as B,a as L,M as O}from"./MarkNoShowDialog-B9mkVtwH.js";import{F}from"./file-text-GWvBVpT9.js";import{V as H}from"./video-C5CzRJ0e.js";import{M as U}from"./map-pin-Dc-CtVAZ.js";import{f as c}from"./format-BLBLR528.js";import"./textarea-iG9OmdwJ.js";import"./checkbox-BAfZ_GMe.js";import"./index-B1GzuOWH.js";import"./circle-check-BfXa_WpO.js";function se(){const{id:l}=b(),u=E(),[n,j]=k.useState({checkIn:!1,complete:!1,noShow:!1}),{data:g=[],isLoading:v,error:y}=T({queryKey:["provider-appointments-detail",l],queryFn:async()=>{if(!l)throw new Error("Appointment ID is required");return await A.getAppointments({startDate:c(new Date(2020,0,1),"yyyy-MM-dd"),endDate:c(new Date(2030,11,31),"yyyy-MM-dd")})},enabled:!!l}),s=g.find(t=>t.id===l),d=t=>{j({...n,[t]:!0})},m=t=>{j({...n,[t]:!1})};if(v)return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx(x,{title:"Appointment Details",showBackButton:!0,backPath:"/provider/appointments"}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(P,{className:"h-96"})})})]});if(y||!s)return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx(x,{title:"Appointment Details",showBackButton:!0,backPath:"/provider/appointments"}),e.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center",children:e.jsx(r,{className:"max-w-md",children:e.jsxs(o,{className:"p-12 text-center",children:[e.jsx(N,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Appointment Not Found"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"The appointment you're looking for doesn't exist or you don't have access to it."}),e.jsx(a,{onClick:()=>u("/provider/appointments"),children:"Back to Appointments"})]})})})]});const f=(t=>({SCHEDULED:{label:"Scheduled",variant:"default"},CONFIRMED:{label:"Confirmed",variant:"secondary"},CHECKED_IN:{label:"Checked In",variant:"default"},COMPLETED:{label:"Completed",variant:"secondary"},CANCELLED:{label:"Cancelled",variant:"destructive"},NO_SHOW:{label:"No Show",variant:"outline"}})[t]||{label:t,variant:"default"})(s.status),C=s.status==="SCHEDULED"||s.status==="CONFIRMED",w=s.status==="CHECKED_IN"||s.status==="CONFIRMED"||s.status==="SCHEDULED",D=s.status!=="COMPLETED"&&s.status!=="CANCELLED";return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx(x,{title:"Appointment Details",showBackButton:!0,backPath:"/provider/appointments"}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Appointment Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[c(new Date(s.date),"EEEE, MMMM d, yyyy")," at ",s.startTime]})]}),e.jsx(M,{variant:f.variant,className:"text-sm py-1 px-3",children:f.label})]}),e.jsxs("div",{className:"flex gap-2",children:[C&&e.jsx(a,{onClick:()=>d("checkIn"),children:"Check In Patient"}),w&&e.jsx(a,{variant:"outline",onClick:()=>d("complete"),children:"Complete Appointment"}),D&&e.jsx(a,{variant:"outline",onClick:()=>d("noShow"),className:"text-orange-600 border-orange-600 hover:bg-orange-50",children:"Mark No-Show"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(r,{children:[e.jsx(p,{children:e.jsx(h,{children:"Appointment Information"})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(S,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Time"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.startTime," - ",s.endTime," (",s.durationMinutes," minutes)"]})]})]}),e.jsx(i,{}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.type.replace(/_/g," ")})]})]}),e.jsx(i,{}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Reason for Visit"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.reason})]})]}),s.isVirtual?e.jsxs(e.Fragment,{children:[e.jsx(i,{}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(H,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Virtual Appointment"}),s.virtualMeetingUrl&&e.jsx(a,{variant:"link",className:"h-auto p-0 text-sm text-blue-600",onClick:()=>window.open(s.virtualMeetingUrl,"_blank"),children:"Join Virtual Meeting"})]})]})]}):s.location&&e.jsxs(e.Fragment,{children:[e.jsx(i,{}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(U,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.location})]})]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{children:[e.jsx(p,{children:e.jsx(h,{children:"Patient Information"})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(I,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.patientName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Patient ID: ",s.patientId.slice(0,8)]})]})]}),e.jsx(i,{}),e.jsx(a,{variant:"outline",className:"w-full",onClick:()=>u(`/provider/patients/${s.patientId}`),children:"View Patient Record"})]})]}),e.jsxs(r,{children:[e.jsx(p,{children:e.jsx(h,{className:"text-sm",children:"Status Timeline"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"font-medium",children:c(new Date(s.date),"MMM d")})]}),s.status==="CHECKED_IN"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Checked In:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Yes"})]}),s.status==="COMPLETED"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completed:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Yes"})]})]})})]})]})]})]})}),s&&e.jsxs(e.Fragment,{children:[e.jsx(B,{open:n.checkIn,onOpenChange:()=>m("checkIn"),appointment:{id:s.id,patientName:s.patientName,time:s.startTime,type:s.type}}),e.jsx(L,{open:n.complete,onOpenChange:()=>m("complete"),appointment:{id:s.id,patientName:s.patientName,time:s.startTime,type:s.type}}),e.jsx(O,{open:n.noShow,onOpenChange:()=>m("noShow"),appointment:{id:s.id,patientName:s.patientName,time:s.startTime,type:s.type}})]})]})}export{se as default};
